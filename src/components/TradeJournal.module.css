/* 文件: src/components/TradeJournal.module.css */

/* 1. 確保 Box Sizing 正常工作 */
* {
    box-sizing: border-box;
}
/* 隱藏數字輸入框的調整箭頭 */
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
input[type="number"] {
    -moz-appearance: textfield; 
}
/* 佔位符樣式 */
::placeholder {
    color: #575a5bff;
    opacity: 1; 
    font-weight: 600;
}
:-ms-input-placeholder, ::-ms-input-placeholder {
    color: #575a5bff;
    font-weight: 600;
}

/* 確保父容器能夠正確地對齊內容 */
.historyListItemHeader {
    display: flex;
    flex-direction: row; /* 保持水平排列 */
    justify-content: space-between; /* 文字和按鈕推到兩側 */
    align-items: center; 
    width: 100%;
    margin-bottom: 5px; /* 確保與下方交易理由分開 */
}

/* 電腦版：股號和交易動作 不換行 */
.historyDetailsContainer {
    display: flex;
    flex-direction: row; /* << 強制水平排列 >> */
    align-items: baseline;
    flex-wrap: nowrap;
    gap: 8px; /* 設定兩組資訊之間的間距 */
}

/* 確保這兩行在電腦版不會強制佔滿 100% 導致換行 */
.historyInfoRow, 
.historyTradeRow {
    width: auto !important; 
    margin-bottom: 0 !important;
}

.historyListItem {
    /* 由於我們在 JSX 中將所有內容都包在 li 裡，這裡只需確保內容流動 */
    display: block; 
    position: relative;
    padding: 6px 10px !important;
}

/* 手機版股號與交易動作垂直行距 */
.historyInfoRow {   
        margin-bottom: -5px !important; 
        /* 如果您希望兩行完全緊貼，請設為 0 */  
}

/* 編輯、刪除按鈕 */
.historyActions {
    display: flex; 
    gap: 0px; 
    align-items: center; 
    flex-direction: row;
    position: absolute; /* 相對於父級 li 進行定位 */
    right: 12px; /* 距離 li 右側 10px */
    top: 10px;
}

/* 確保交易詳情區塊在電腦版是水平排列的 */
.historyDetails {
    display: flex;
    flex-wrap: nowrap; /* 不換行 */
    flex-grow: 1; /* 讓文字區塊佔據剩餘大部分空間 */
    align-items: center;
    margin-right: 20px; /* 確保與右邊按鈕組有足夠間隔 */
}

/* 交易理由 */
.tradeReason {
    margin-top: 5px; 
    margin-bottom: 0;
}

[data-theme='dark'] .pnlSelectContainer select {
    /* 文字改為白色 */
    color: #ffffff !important;
    border: 1px solid #ffffff !important;
}

/* --- 手機版響應式設計 (最大寬度 768px) --- */
@media (max-width: 768px) {

    /* 確保 body/html/app 級別阻止溢出 */
    body, html {
        overflow-x: hidden !important;
        width: 100vw; /* 確保整個視口寬度正確 */
    }
    
    /* 1. 最外層容器 (.responsiveContainer) 修正 */
    .responsiveContainer {
        /* 修正無效的 margin 值，並給予微小的左右 padding */
        padding: 10px 10px !important; 
        margin: 0 auto !important; /* 修正 margin: 10!important; 並確保居中 */
        width: 100% !important; 
        max-width: none !important; 
        overflow-x: hidden !important; /* 確保內容不會溢出自身 */
    }

    /* 2. 主輸入欄位 (formInputRow) 修正 */
    .formInputRow,
    form > div:nth-child(1) { 
        flex-direction: column !important; 
        gap: 8px !important;
    }
    
    /* VVVV 關鍵修正：確保輸入框佔滿寬度 VVVV */
    form > div:nth-child(1) input {
        width: 100% !important; /* 強制佔滿寬度 */
        /* 移除 flex: 1 1 100% !important; 避免和內聯樣式衝突 */
    }

    /* 3. 卡片區塊 (儀表板總體指標) */
    .responsiveFlexRow {
        flex-direction: column !important;
        gap: 15px !important;
    }
    
    /* 4. 交易表單中的方向按鈕和備註 */
    form > div:nth-child(2) { 
        flex-direction: column !important;
        gap: 15px !important;
    }
    form > div:nth-child(2) > div:first-child {
        width: 100% !important; 
        flex-direction: row !important; 
        justify-content: space-between;
    }
    form > div:nth-child(2) button {
        width: 48% !important;
    }
    
    /* 5. 歷史記錄篩選器 (標題/搜尋/下拉選單) */
    .responsiveFilterRow {
        flex-direction: column !important;
        align-items: stretch !important;
        padding-left: 0px; 
        padding-right: 10px;
    }
    .responsiveFilterRowControls {
        flex-direction: column !important;
        gap: 10px !important;
        width: 100% !important;
    }
    .responsiveFilterRowControls input,
    .responsiveFilterRowControls select {
        width: 100% !important;
        min-width: 100% !important;
    }

    /* 6. 歷史記錄列表項目中的內容和按鈕 */
    .historyListItemHeader {
        flex-direction: row; 
        align-items: center;
        justify-content: space-between; 
        width: 100%;
        
        /* 由於交易理由被移到了下方，這裡的 margin-bottom 可以保留 */
        margin-bottom: 5px; 
    }
    
    /* 編輯、刪除按鈕 */
    .historyActions {
        width: auto; /* 讓按鈕組寬度只由內容決定 */
        flex-shrink: 0; /* 防止按鈕被壓縮 */
        gap: 0px !important;
        /* 在手機上我們想讓按鈕佔用最小空間，並靠右對齊，使用 flex-end */
        justify-content: flex-end;
        top: 38px !important;
        margin-right: -3px !important;
    }
    
    /* 3. 確保股票資訊區塊也佔滿寬度 */
    .historyDetails { 
        width: 100%; /* 文字內容佔滿一行 */
        display: flex;
        flex-wrap: wrap; 
        /* 讓文字區塊佔據所有剩餘空間，推動按鈕組到最右邊 */
        flex-grow: 1; 
        margin-right: 10px; /* 與按鈕之間增加一些間隔 */
    }
    /* 手機版 股號和交易動作 要換行 */
    .historyDetailsContainer {
        flex-direction: column; /* 手機版改回垂直 */
        align-items: flex-start;
        gap: 2px; /* 回到您之前要求的緊密間距 */
    }

    .tradeSeparator {
        display: block !important; 
        height: 0;
        visibility: hidden; 
        margin: 0; 
        padding: 0;
    }
    .tradeAction {
        display: block !important;
        width: 100%; 
        margin-top: 5px;
    }
    .tradeReason {
        margin-top: 5px !important; /* 確保它緊跟在頂部 header 之後 */
        margin-bottom: 0 !important;
        width: 100%;
    }
    
    /* 7. 儲存/取消按鈕在手機上樣式 */
    form > div:nth-child(3) {   
         flex-direction: row !important; 
         justify-content: flex-start;
         gap: 10px !important; 
    }
    form > div:nth-child(3) button {
        width: 48% !important; 
        padding: 10px !important; 
    }
    
    /* P&L 摘要的標題與下拉選單 */
    .pnlHeaderRow {
        flex-direction: column !important; 
        align-items: flex-start !important;
    }
    .pnlHeaderRow h3 {
        margin-bottom: 10px !important; 
        margin-right: 0 !important; 
    }
    .pnlSelectContainer {
        margin-top: -5px !important;
    }
}

[data-theme='dark'] .responsiveContainer {
    background-color: #1a1a1a; /* 獨立設定：深灰背景 */
    color: #e3e3e3;            /* 獨立設定：淺灰字體 */
}


[data-theme='dark'] .formInputRow input,
[data-theme='dark'] textarea,
[data-theme='dark'] .responsiveFilterRowControls select {
    background-color: #4c4b4b32; /* 輸入框背景 */
    color: #ffffff;            /* 輸入框字體 */
    border: 1px solid #ffffff; /* 輸入框邊框 */
}

[data-theme='dark'] .formInputRow input::placeholder,
[data-theme='dark'] textarea::placeholder {
    color: #bbbbbb; /* 暗色模式下建議使用深灰色，避免太亮搶走焦點 */
    opacity: 1;
}

[data-theme='dark'] .responsiveFilterRowControls input::placeholder {
    /* 建議使用較亮的灰色，例如 #aaa 或 #bbb，確保在深底上清晰 */
    color: #bbbbbb !important; 
    opacity: 1 !important; /* 確保顏色不會被透明度沖淡 */
}

/* 獨立設定：表格在暗色模式下的外觀 */
[data-theme='dark'] table {
    color: #e6e6e6;
}
[data-theme='dark'] tr {
    border-bottom: 1px solid #333333 !important;
}
/* 表格表頭 */
[data-theme='dark'] th {
    background-color: #3a3a3a65;
}

/* 交易日誌區域外框顏色 */
.tradeFormContainer {
    border: 1px solid #deb877 !important; /* 這是原本的金色色碼 */
}

/* 暗色模式下 交易紀錄輸入框的顏色 */
[data-theme='dark'] .formInputRow input,
[data-theme='dark'] textarea {
    border: 1px solid #ffffff !important;
}

/* 總損益、勝率卡片 亮色模式 */
.pnlSummaryCard {
    background-color: #f9f9f9c5;
}

/* 總損益、勝率卡片 暗色模式 */
[data-theme='dark'] .pnlSummaryCard {
    /* 您可以設定比大背景稍微淺一點的深灰色，做出層次感 */
    background-color: #2c2c2ca5 !important; 
}
[data-theme='dark'] .historyActions button {
    /* 1. 將背景改為透明 */
    background-color: #26262681 !important;
}

/* 買入、賣出 按鈕 */
.directionBtn {
    transition: all 0.2s ease;
    background-color: transparent;
    color: var(--ifm-color-primary);
}

/* 亮色模式設定 */
.activeBuy {
    background-color: var(--ifm-color-primary) !important;
    color: white !important;
}
.activeSell {
    background-color: var(--ifm-color-primary) !important;
    color: white !important;
}

/* 暗色模式 - 買入按下時 */
[data-theme='dark'] .activeBuy {
    color: #ffffff !important;
}

/* 暗色模式 - 賣出按下時 */
[data-theme='dark'] .activeSell {  
    color: #ffffff !important;
}

/* 暗色模式 - 未按下時的按鈕文字顏色 */
[data-theme='dark'] .directionBtn {
    color: #bbbbbb; 
    background-color: #1a1a1a;
}