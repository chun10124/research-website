/* 白板容器 */
.whiteboardContainer {
  width: 100%;
  margin: 0;
  padding: 20px;
}

.whiteboardContainer h2 {
  margin-bottom: 10px;
  color: var(--ifm-heading-color);
}

/* 主布局：左右分栏 */
.mainLayout {
  display: flex;
  gap: 20px;
  align-items: flex-start;
}

/* 左側欄 */
.leftSidebar {
  width: 220px;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  gap: 20px;
  position: sticky;
  top: 20px;
  max-height: calc(100vh - 100px);
  overflow-y: auto;
  padding-right: 8px;
}

/* 自定义滚动条 */
.leftSidebar::-webkit-scrollbar {
  width: 6px;
}

.leftSidebar::-webkit-scrollbar-track {
  background: transparent;
}

.leftSidebar::-webkit-scrollbar-thumb {
  background: var(--ifm-color-emphasis-300);
  border-radius: 3px;
}

.leftSidebar::-webkit-scrollbar-thumb:hover {
  background: var(--ifm-color-emphasis-400);
}

/* 右側內容區 */
.rightContent {
  flex: 1;
  min-width: 0;
}

/* 區塊標題 */
.sectionTitle {
  font-size: 1em;
  font-weight: 600;
  margin: 0 0 12px 0;
  color: var(--ifm-heading-color);
}

/* 標籤區塊 */
.tagsSection {
  background-color: var(--ifm-background-surface-color);
  border: 1px solid var(--ifm-color-emphasis-300);
  border-radius: 8px;
  padding: 15px;
}

.tagsList {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  max-height: 300px;
  overflow-y: auto;
  padding-right: 4px;
}

.tagsList::-webkit-scrollbar {
  width: 4px;
}

.tagsList::-webkit-scrollbar-track {
  background: transparent;
}

.tagsList::-webkit-scrollbar-thumb {
  background: var(--ifm-color-emphasis-300);
  border-radius: 2px;
}

.tagsList::-webkit-scrollbar-thumb:hover {
  background: var(--ifm-color-emphasis-400);
}

.tagButton {
  padding: 4px 12px;
  border: 1px solid #deb887;
  border-radius: 15px;
  background-color: var(--ifm-background-color);
  color: var(--ifm-font-color-base);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;
}

.tagButton:hover {
  background-color: var(--ifm-color-emphasis-100);
  border-color: var(--ifm-color-primary);
}

.tagButtonActive {
  background-color: var(--ifm-color-primary);
  color: white;
  border-color: var(--ifm-color-primary);
}

.tagButtonActive:hover {
  background-color: var(--ifm-color-primary-dark);
}

/* 筛选区域 */
.filterSection {
  background-color: var(--ifm-background-surface-color);
  border: 1px solid var(--ifm-color-emphasis-300);
  border-radius: 8px;
  padding: 15px;
}

.searchInput,
.timeSelect {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid var(--ifm-color-emphasis-300);
  border-radius: 6px;
  background-color: var(--ifm-background-color);
  color: var(--ifm-font-color-base);
  font-size: 14px;
  margin-bottom: 10px;
}

.filterInfo {
  font-size: 0.9em;
  color: var(--ifm-color-emphasis-600);
  margin-top: 8px;
}

/* 新增按鈕 - 浮動右下角 */
.addNoteBtn {
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 56px;
  height: 56px;
  padding: 0;
  background: #deb887;
  color: white;
  border: none;
  border-radius: 50%;
  font-size: 28px;
  font-weight: 300;
  cursor: pointer;
  transition: all 0.2s;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 12px rgba(222, 184, 135, 0.4);
  z-index: 100;
}

.addNoteBtn:hover {
  background: #d4a574;
  transform: scale(1.1);
  box-shadow: 0 6px 16px rgba(222, 184, 135, 0.5);
}

.addNoteBtn:active {
  transform: scale(1.05);
}

/* 表单区域 */
.formContainer {
  background-color: var(--ifm-background-surface-color);
  border: 1px solid var(--ifm-color-emphasis-300);
  border-radius: 8px;
  padding: 15px;
}

.formRow {
  margin-bottom: 15px;
}

.formRow:last-child {
  margin-bottom: 0;
}

.contentInput {
  width: 100%;
  padding: 12px;
  border: 1px solid var(--ifm-color-emphasis-300);
  border-radius: 6px;
  background-color: var(--ifm-background-color);
  color: var(--ifm-font-color-base);
  font-size: 14px;
  font-family: inherit;
  resize: vertical;
  min-height: 100px;
}

.tagsInput {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid var(--ifm-color-emphasis-300);
  border-radius: 6px;
  background-color: var(--ifm-background-color);
  color: var(--ifm-font-color-base);
  font-size: 14px;
}

.colorPicker {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.colorPicker label {
  font-size: 14px;
  color: var(--ifm-font-color-base);
  white-space: nowrap;
}

.colorOptions {
  display: flex;
  gap: 8px;
}

.colorOption {
  width: 32px;
  height: 32px;
  border: 2px solid transparent;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;
  padding: 0;
}

.colorOption:hover {
  transform: scale(1.1);
  border-color: var(--ifm-color-emphasis-600);
}

.colorSelected {
  border-color: var(--ifm-color-primary) !important;
  box-shadow: 0 0 0 2px var(--ifm-color-primary-light);
}

.formActions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.formActions button {
  flex: 1;
  min-width: 80px;
}

.submitBtn,
.cancelBtn {
  padding: 10px 20px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.2s;
}

.submitBtn {
  background-color: var(--ifm-color-primary);
  color: white;
}

.submitBtn:hover {
  background-color: var(--ifm-color-primary-dark);
}

.cancelBtn {
  background-color: var(--ifm-color-emphasis-200);
  color: var(--ifm-font-color-base);
}

.cancelBtn:hover {
  background-color: var(--ifm-color-emphasis-300);
}

/* 便利貼网格 */
.notesGrid {
  display: grid;
  /* 移除 1fr，改用固定寬度 320px */
  /* 這樣單元格就會剛好等於便利貼寬度，不會有多餘空間 */
  grid-template-columns: repeat(auto-fill, 250px); 
  
  /* 這裡設定你最終想要的物理間距 */
  gap: 20px 20px; /* 上下 16px，左右 8px (調小一點) */
  
  justify-content: start; 
  align-items: start;
  width: 100%;
}

/* 便利贴卡片 */
.note {
  width: 100%; 
  
  padding: 18px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  
  /* 保持你喜歡的高度與比例 */
  min-height: 120px;
  max-height: 250px;
  aspect-ratio: 1 / 0.9;
  
  margin: 0; /* 確保 margin 等於 0 */
  display: flex;
  flex-direction: column;
  position: relative;
  cursor: pointer;
}

.note:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* 展開的便利貼 */
.noteExpanded {
  position: fixed !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  z-index: 1000 !important;
  max-height: 80vh !important;
  width: 500px !important;
  max-width: 90vw !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
  overflow-y: auto;
  aspect-ratio: unset !important;
  font-size: 16px;
}

.noteExpanded:hover {
  transform: translate(-50%, -50%) !important;
}

/* 背景遮罩 */
.overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 999;
  backdrop-filter: blur(2px);
}

/* 編輯表單 */
.editingForm {
  display: flex;
  flex-direction: column;
  gap: 10px;
  height: 100%;
}

.editTextarea {
  flex: 1;
  width: 100%;
  padding: 0;
  border: none;
  background: transparent;
  color: rgba(0, 0, 0, 0.85);
  font-size: 16px;
  line-height: 1.6;
  resize: none;
  font-family: inherit;
  min-height: 280px;
}

.editTextarea:focus {
  outline: none;
}

.editTextarea::placeholder {
  color: rgba(0, 0, 0, 0.3);
}

.editTagsInput {
  width: 100%;
  padding: 10px;
  border: none;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.3);
  font-size: 13px;
  color: rgba(0, 0, 0, 0.8);
  transition: background 0.2s;
}

.editTagsInput:focus {
  outline: none;
  background: rgba(255, 255, 255, 0.4);
}

.editTagsInput::placeholder {
  color: rgba(0, 0, 0, 0.3);
  font-size: 12px;
}

.editColorPicker {
  display: flex;
  gap: 10px;
  padding: 10px;
  background: rgba(255, 255, 255, 0.3);
  border-radius: 6px;
  justify-content: center;
  border: none;
}

.editColorPicker .colorOption {
  width: 32px;
  height: 32px;
  border: 2px solid rgba(0, 0, 0, 0.15);
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.editColorPicker .colorOption:hover {
  transform: scale(1.1);
  border-color: rgba(0, 0, 0, 0.3);
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
}

.editColorPicker .colorSelected {
  border-color: rgba(0, 0, 0, 0.6) !important;
  border-width: 3px !important;
  box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.9), 0 3px 8px rgba(0, 0, 0, 0.2);
  transform: scale(1.05);
}

.editActions {
  display: flex;
  gap: 10px;
  margin-top: 8px;
}

.saveBtn,
.editActions .cancelBtn {
  flex: 1;
  padding: 10px 16px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.saveBtn {
  background: #4caf50;
  color: white;
}

.saveBtn:hover {
  background: #45a049;
  box-shadow: 0 3px 6px rgba(76, 175, 80, 0.3);
  transform: translateY(-1px);
}

.editActions .cancelBtn {
  background: rgba(0, 0, 0, 0.1);
  color: rgba(0, 0, 0, 0.7);
}

.editActions .cancelBtn:hover {
  background: rgba(0, 0, 0, 0.15);
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
  transform: translateY(-1px);
}

.noteHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.noteTime {
  font-size: 0.85em;
  color: rgba(0, 0, 0, 0.6);
  font-weight: 500;
}

.noteActions {
  display: flex;
  gap: 5px;
}

.editBtn,
.deleteBtn,
.completeBtn {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 16px;
  padding: 4px 6px;
  border-radius: 4px;
  transition: background-color 0.2s;
  opacity: 0.7;
}

.editBtn:hover,
.deleteBtn:hover,
.completeBtn:hover {
  opacity: 1;
  background-color: rgba(0, 0, 0, 0.1);
}

.completeBtn {
  position: absolute;
  bottom: 10px;
  right: 10px;
  font-size: 20px;
  color: #27ae60;
  font-weight: bold;
  padding: 6px 10px;
  border-radius: 50%;
  background-color: rgba(39, 174, 96, 0.1);
  opacity: 0.8;
}

.editBtn {
  font-size: 18px;
  color: #f39c12;
  font-weight: bold;
  padding: 4px 8px;
  border-radius: 4px;
  background-color: rgba(243, 156, 18, 0.1);
  opacity: 0.8;
}

.editBtn:hover {
  background-color: rgba(243, 156, 18, 0.2);
  opacity: 1;
}

.deleteBtn {
  font-size: 18px;
  color: #e74c3c;
  font-weight: bold;
  padding: 4px 8px;
  border-radius: 4px;
  background-color: rgba(231, 76, 60, 0.1);
  opacity: 0.8;
}

.deleteBtn:hover {
  background-color: rgba(231, 76, 60, 0.2);
  opacity: 1;
}

.completeBtn:hover {
  background-color: rgba(39, 174, 96, 0.2);
  opacity: 1;
  transform: scale(1.1);
}

.noteContent {
  flex: 0 1 auto;
  word-wrap: break-word;
  white-space: pre-wrap;
  line-height: 1.6;
  color: rgba(0, 0, 0, 0.8);
  
  /* 文字過長時顯示省略號 */
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 4;
  line-clamp: 4;
  -webkit-box-orient: vertical;
  text-overflow: ellipsis;
  min-height: 0;
  max-height: calc(1.6em * 4); /* 限制最大高度為4行 */
  margin-bottom: 8px;
}

/* 展開狀態：顯示完整文字 */
.noteExpanded .noteContent {
  -webkit-line-clamp: unset;
  line-clamp: unset;
  overflow: visible;
  display: block;
  white-space: pre-wrap;
  max-height: none;
}

.noteTags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: auto;
  padding-top: 8px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  flex-shrink: 0; /* 防止被壓縮 */
}

.tag {
  display: inline-block;
  padding: 4px 8px;
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 12px;
  font-size: 0.75em;
  color: rgba(0, 0, 0, 0.7);
  font-weight: 500;
}

.highlight {
  background-color: #ffd700 !important;
  padding: 2px 4px;
  border-radius: 3px;
  font-weight: 700;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3), inset 0 0 2px rgba(255, 255, 255, 0.3);
  color: #000 !important;
  display: inline-block;
  position: relative;
  z-index: 10;
  border: 1px solid rgba(0, 0, 0, 0.2);
}

.emptyState {
  grid-column: 1 / -1;
  text-align: center;
  padding: 60px 20px;
  color: var(--ifm-color-emphasis-600);
  font-size: 1.1em;
}

/* 暗色模式适配 */
[data-theme='dark'] .tagButton {
  background-color: var(--ifm-background-color);
  border-color: #deb887;
  color: var(--ifm-font-color-base);
}

[data-theme='dark'] .tagButton:hover {
  background-color: var(--ifm-color-emphasis-200);
  border-color: var(--ifm-color-primary);
}

[data-theme='dark'] .tagButtonActive {
  background-color: var(--ifm-color-primary);
  color: white;
  border-color: var(--ifm-color-primary);
}

[data-theme='dark'] .tagButtonActive:hover {
  background-color: var(--ifm-color-primary-dark);
}

[data-theme='dark'] .noteTime {
  color: rgba(255, 255, 255, 0.6);
}

[data-theme='dark'] .noteContent {
  color: rgba(255, 255, 255, 0.9);
}

[data-theme='dark'] .noteHeader {
  border-bottom-color: rgba(255, 255, 255, 0.1);
}

[data-theme='dark'] .noteTags {
  border-top-color: rgba(255, 255, 255, 0.1);
}

[data-theme='dark'] .tag {
  background-color: rgba(255, 255, 255, 0.15);
  color: rgba(255, 255, 255, 0.8);
}

[data-theme='dark'] .highlight {
  background-color: #f57f17;
  color: #000;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
}

[data-theme='dark'] .editBtn:hover,
[data-theme='dark'] .deleteBtn:hover,
[data-theme='dark'] .completeBtn:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

[data-theme='dark'] .completeBtn {
  color: #2ecc71;
  background-color: rgba(46, 204, 113, 0.15);
}

[data-theme='dark'] .completeBtn:hover {
  background-color: rgba(46, 204, 113, 0.25);
}

/* 已完成按鈕 */
.completedBtn {
  padding: 10px 20px;
  background-color: var(--ifm-color-primary);
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.2s;
}

.completedBtn:hover {
  background-color: var(--ifm-color-primary-dark);
  transform: translateY(-1px);
}

/* 返回按鈕 */
.backBtn {
  padding: 10px 20px;
  background-color: var(--ifm-color-emphasis-200);
  color: var(--ifm-font-color-base);
  border: 1px solid var(--ifm-color-emphasis-300);
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.2s;
}

.backBtn:hover {
  background-color: var(--ifm-color-emphasis-300);
}

/* 已完成的便利貼樣式 */
.completedNote {
  opacity: 0.85;
  position: relative;
}

.completedNote::before {
  content: '✓ 已完成';
  position: absolute;
  bottom: 18px;
  right: 18px;
  background-color: rgba(39, 174, 96, 0.9);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.7em;
  font-weight: 600;
  z-index: 5;
}

/* 响应式设计 */
@media (max-width: 1024px) {
  .mainLayout {
    flex-direction: column;
  }

  .leftSidebar {
    width: 100%;
    position: static;
    max-height: none;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
  }

  .tagsSection,
  .filterSection,
  .formContainer {
    margin-bottom: 0;
  }
}

@media (max-width: 768px) {
  .whiteboardContainer {
    padding: 15px;
  }

  .leftSidebar {
    grid-template-columns: 1fr;
  }

  .notesGrid {
    grid-template-columns: 1fr;
    gap: 15px;
  }

  .formActions {
    flex-direction: column;
  }

  .formActions button {
    width: 100%;
  }
}

/* Dark mode */
[data-theme='dark'] .addNoteBtn {
  background: #c9a26a;
}

[data-theme='dark'] .addNoteBtn:hover {
  background: #b8915a;
}

[data-theme='dark'] .editTextarea {
  color: rgba(0, 0, 0, 0.85);
}

[data-theme='dark'] .editTextarea::placeholder {
  color: rgba(0, 0, 0, 0.3);
}

[data-theme='dark'] .editTagsInput {
  background: rgba(0, 0, 0, 0.2);
  color: rgba(0, 0, 0, 0.85);
}

[data-theme='dark'] .editTagsInput:focus {
  background: rgba(0, 0, 0, 0.3);
}

[data-theme='dark'] .editTagsInput::placeholder {
  color: rgba(0, 0, 0, 0.3);
}

[data-theme='dark'] .editColorPicker {
  background: rgba(0, 0, 0, 0.2);
  border-color: rgba(0, 0, 0, 0.25);
}
