"use strict";(globalThis.webpackChunkresearch=globalThis.webpackChunkresearch||[]).push([[540],{862:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(6540),s=n(9410),a=n(8185),i=n(2294),r=n(5629),l=n(4848);const c=["#FFE5B4","#E1F5FE","#F3E5F5","#E8F5E9","#FFF3E0","#FCE4EC"];const d=function(){const[e,t]=(0,o.useState)([]),[n,d]=(0,o.useState)(""),[u,m]=(0,o.useState)(""),[h,g]=(0,o.useState)("ALL"),[p,A]=(0,o.useState)(null),[x,f]=(0,o.useState)(null);(0,o.useEffect)(()=>{const e=(0,a.aQ)(i.FO,e=>{if(e.exists()){const n=e.data().notes||[];t(n.sort((e,t)=>(t.createdAt||0)-(e.createdAt||0))),console.log("\u767d\u677f\u8cc7\u6599\u5df2\u5f9e Firestore \u8f09\u5165\u4e26\u5373\u6642\u540c\u6b65\u3002")}else console.log("Firestore \u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u5f9e\u7a7a\u767d\u767d\u677f\u958b\u59cb\u3002"),t([])},e=>{console.error("Firestore \u76e3\u807d\u5931\u6557:",e)});return()=>e()},[]);const j=async e=>{try{const n=e.sort((e,t)=>(t.createdAt||0)-(e.createdAt||0));t(n),await(0,a.BN)(i.FO,{notes:e}),console.log("\u767d\u677f\u8cc7\u6599\u5df2\u6210\u529f\u5beb\u5165 Firestore\u3002")}catch(n){console.error("\u5beb\u5165 Firestore \u5931\u6557:",n),alert("\u8b66\u544a\uff1a\u8cc7\u6599\u5beb\u5165\u96f2\u7aef\u5931\u6557\uff0c\u8acb\u6aa2\u67e5\u7db2\u8def\u9023\u7dda\u3002")}},b=(0,o.useMemo)(()=>{const t=new Set;return e.forEach(e=>{e.tags&&e.tags.split(/[\s,]+/).forEach(e=>{const n=e.trim();n&&t.add(n)})}),Array.from(t).sort()},[e]),v=(0,o.useMemo)(()=>{let t=e.filter(e=>!e.completed);if(n.trim()){const e=n.trim().toLowerCase();t=t.filter(t=>t.content.toLowerCase().includes(e)||t.tags&&t.tags.toLowerCase().includes(e))}if(u&&(t=t.filter(e=>e.tags&&e.tags.split(/[\s,]+/).some(e=>e.trim()===u))),"ALL"!==h){const e=Date.now();let n=0;switch(h){case"TODAY":n=(new Date).setHours(0,0,0,0);break;case"WEEK":n=e-6048e5;break;case"MONTH":n=e-2592e6;break;case"QUARTER":n=e-7776e6;break;case"YEAR":n=e-31536e6}t=t.filter(e=>(e.createdAt||0)>=n)}return t.sort((e,t)=>(t.createdAt||0)-(e.createdAt||0))},[e,n,u,h]),N=()=>{if(!x.content.trim())return void alert("\u8acb\u8f38\u5165\u4fbf\u5229\u8cbc\u5167\u5bb9\uff01");const t=x.tags.trim().split(/\s+/).filter(e=>e).join(" "),n={...x,tags:t,updatedAt:Date.now()};let o;o=e.find(e=>e.id===x.id)?e.map(e=>e.id===x.id?n:e):[n,...e],j(o),f(null),A(null)},C=()=>{f(null),A(null)},_=t=>{if(window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u9019\u5f35\u4fbf\u5229\u8cbc\u55ce\uff1f")){const n=e.filter(e=>e.id!==t);j(n),x&&x.id===t&&(f(null),A(null))}},y=e=>{if(!e)return"";const t=new Date(e);return`${t.toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"})} ${t.toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}`},k=(e,t)=>{if(!t||!t.trim())return e;const n=t.trim().toLowerCase(),o=e.toLowerCase(),s=[];let a=0,i=o.indexOf(n,a),c=0;for(;-1!==i;)i>a&&s.push(e.substring(a,i)),s.push((0,l.jsx)("span",{className:r.A.highlight,style:{backgroundColor:"#ffd700",color:"#000",padding:"2px 4px",borderRadius:"3px",fontWeight:"700",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 0, 0, 0.2)",display:"inline-block",position:"relative",zIndex:10},children:e.substring(i,i+t.length)},"highlight-"+c++)),a=i+t.length,i=o.indexOf(n,a);return a<e.length&&s.push(e.substring(a)),s.length>0?s:e},w=(0,o.useMemo)(()=>e.filter(e=>e.completed).length,[e]);return(0,l.jsxs)("div",{className:r.A.whiteboardContainer,children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[(0,l.jsx)("h2",{children:"\u767d\u677f"}),w>0&&(0,l.jsxs)("button",{onClick:()=>{window.location.href="/research-website/completed-notes"},className:r.A.completedBtn,children:["\u5df2\u5b8c\u6210 (",w,")"]})]}),(0,l.jsxs)("div",{className:r.A.mainLayout,children:[(0,l.jsxs)("div",{className:r.A.leftSidebar,children:[(0,l.jsxs)("div",{className:r.A.tagsSection,children:[(0,l.jsx)("h3",{className:r.A.sectionTitle,children:"\u6a19\u7c64"}),(0,l.jsxs)("div",{className:r.A.tagsList,children:[(0,l.jsx)("button",{className:`${r.A.tagButton} ${""===u?r.A.tagButtonActive:""}`,onClick:()=>m(""),children:"\u5168\u90e8"}),b.map(e=>(0,l.jsx)("button",{className:`${r.A.tagButton} ${u===e?r.A.tagButtonActive:""}`,onClick:()=>m(e),children:e},e))]})]}),(0,l.jsxs)("div",{className:r.A.filterSection,children:[(0,l.jsx)("h3",{className:r.A.sectionTitle,children:"\u7be9\u9078"}),(0,l.jsx)("input",{type:"text",placeholder:"\u95dc\u9375\u5b57\u641c\u5c0b...",value:n,onChange:e=>d(e.target.value),className:r.A.searchInput}),(0,l.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:r.A.timeSelect,children:[(0,l.jsx)("option",{value:"ALL",children:"\u5168\u90e8\u6642\u9593"}),(0,l.jsx)("option",{value:"TODAY",children:"\u4eca\u5929"}),(0,l.jsx)("option",{value:"WEEK",children:"\u8fd1\u4e00\u9031"}),(0,l.jsx)("option",{value:"MONTH",children:"\u8fd1\u4e00\u6708"}),(0,l.jsx)("option",{value:"QUARTER",children:"\u8fd1\u4e00\u5b63"}),(0,l.jsx)("option",{value:"YEAR",children:"\u8fd1\u4e00\u5e74"})]}),(0,l.jsxs)("div",{className:r.A.filterInfo,children:["\u986f\u793a ",v.length," / ",e.length," \u5f35"]})]})]}),p&&(0,l.jsx)("div",{className:r.A.overlay,onClick:()=>{A(null),f(null)}}),(0,l.jsx)("div",{className:r.A.rightContent,children:(0,l.jsx)("div",{className:r.A.notesGrid,children:0===v.length?(0,l.jsx)("div",{className:r.A.emptyState,children:0===e.length?"\u9084\u6c92\u6709\u4fbf\u5229\u8cbc\uff0c\u5efa\u7acb\u7b2c\u4e00\u5f35\u5427\uff01":"\u6c92\u6709\u5339\u914d\u7684\u4fbf\u5229\u8cbc"}):(0,l.jsxs)(l.Fragment,{children:[v.map(t=>(0,l.jsx)("div",{className:`${r.A.note} ${p===t.id?r.A.noteExpanded:""}`,style:{backgroundColor:t.color||c[0]},onClick:e=>{e.stopPropagation(),x&&x.id===t.id||(e=>{f({...e}),A(e.id)})(t)},children:x&&x.id===t.id?(0,l.jsxs)("div",{className:r.A.editingForm,onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:r.A.noteHeader,children:[(0,l.jsx)("span",{className:r.A.noteTime,children:y(t.createdAt)}),(0,l.jsx)("div",{className:r.A.noteActions,children:(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),_(t.id)},className:r.A.deleteBtn,title:"\u522a\u9664",children:"\u2715"})})]}),(0,l.jsx)("textarea",{value:x.content,onChange:e=>f({...x,content:e.target.value}),placeholder:"\u8f38\u5165\u4fbf\u5229\u8cbc\u5167\u5bb9...",className:r.A.editTextarea,autoFocus:!0}),(0,l.jsx)("input",{type:"text",value:x.tags,onChange:e=>f({...x,tags:e.target.value}),placeholder:"\u6a19\u7c64\uff08\u7a7a\u683c\u5206\u9694\uff09",className:r.A.editTagsInput}),(0,l.jsx)("div",{className:r.A.editColorPicker,children:c.map(e=>(0,l.jsx)("button",{type:"button",className:`${r.A.colorOption} ${x.color===e?r.A.colorSelected:""}`,style:{backgroundColor:e},onClick:()=>f({...x,color:e})},e))}),(0,l.jsxs)("div",{className:r.A.editActions,children:[(0,l.jsx)("button",{onClick:N,className:r.A.saveBtn,children:"\u4fdd\u5b58"}),(0,l.jsx)("button",{onClick:C,className:r.A.cancelBtn,children:"\u53d6\u6d88"})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:r.A.noteHeader,children:[(0,l.jsx)("span",{className:r.A.noteTime,children:y(t.createdAt)}),(0,l.jsx)("div",{className:r.A.noteActions,children:(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),_(t.id)},className:r.A.deleteBtn,title:"\u522a\u9664",children:"\u2715"})})]}),(0,l.jsx)("div",{className:r.A.noteContent,children:k(t.content,n)}),t.tags&&(0,l.jsx)("div",{className:r.A.noteTags,children:t.tags.split(/\s+/).filter(e=>e).map((e,t)=>{const o=k(e,n);return(0,l.jsx)("span",{className:r.A.tag,children:o},t)})}),(0,l.jsx)("button",{onClick:n=>{n.stopPropagation(),(t=>{if(window.confirm("\u78ba\u5b9a\u8981\u6a19\u8a18\u70ba\u5b8c\u6210\u55ce\uff1f\u5b8c\u6210\u5f8c\u5c07\u79fb\u81f3\u5df2\u5b8c\u6210\u9801\u9762\u3002")){const n=e.map(e=>e.id===t?{...e,completed:!0,completedAt:Date.now()}:e);j(n)}})(t.id)},className:r.A.completeBtn,title:"\u6a19\u8a18\u70ba\u5b8c\u6210",children:"\u2713"})]})},t.id)),x&&!e.find(e=>e.id===x.id)&&(0,l.jsx)("div",{className:`${r.A.note} ${r.A.noteExpanded}`,style:{backgroundColor:x.color},onClick:e=>e.stopPropagation(),children:(0,l.jsxs)("div",{className:r.A.editingForm,children:[(0,l.jsx)("div",{className:r.A.noteHeader,children:(0,l.jsx)("span",{className:r.A.noteTime,children:"\u65b0\u4fbf\u5229\u8cbc"})}),(0,l.jsx)("textarea",{value:x.content,onChange:e=>f({...x,content:e.target.value}),placeholder:"\u8f38\u5165\u4fbf\u5229\u8cbc\u5167\u5bb9...",className:r.A.editTextarea,autoFocus:!0}),(0,l.jsx)("input",{type:"text",value:x.tags,onChange:e=>f({...x,tags:e.target.value}),placeholder:"\u6a19\u7c64\uff08\u7a7a\u683c\u5206\u9694\uff09",className:r.A.editTagsInput}),(0,l.jsx)("div",{className:r.A.editColorPicker,children:c.map(e=>(0,l.jsx)("button",{type:"button",className:`${r.A.colorOption} ${x.color===e?r.A.colorSelected:""}`,style:{backgroundColor:e},onClick:()=>f({...x,color:e})},e))}),(0,l.jsxs)("div",{className:r.A.editActions,children:[(0,l.jsx)("button",{onClick:N,className:r.A.saveBtn,children:"\u4fdd\u5b58"}),(0,l.jsx)("button",{onClick:C,className:r.A.cancelBtn,children:"\u53d6\u6d88"})]})]})})]})})})]}),(0,l.jsx)("button",{onClick:()=>{const e={id:(0,s.A)(),content:"",tags:"",color:c[0],createdAt:Date.now(),updatedAt:Date.now()};f(e),A(e.id)},className:r.A.addNoteBtn,title:"\u65b0\u589e\u4fbf\u5229\u8cbc",children:"+"})]})}},2294:(e,t,n)=>{n.d(t,{FO:()=>u,_Z:()=>c,bY:()=>d});var o=n(223),s=n(8185),a=n(7673),i=n(8193);const r=(0,o.Dk)().length?(0,o.Sx)():(0,o.Wp)({apiKey:"AIzaSyAUDHCT_dtMHQFPcUh6-gFSIFXT6dR9MVg",authDomain:"my-tools-1228.firebaseapp.com",projectId:"my-tools-1228",storageBucket:"my-tools-1228.firebasestorage.app",messagingSenderId:"511787460330",appId:"1:511787460330:web:2896507029051b666e5993",measurementId:"G-WFF13TV61G"}),l=(0,s._A)(r,{experimentalForceLongPolling:!0,useFetchStreams:!1}),c=(0,s.rJ)(l,"stockWatchlist"),d=(0,s.H9)(l,"trade_journals","my_only_log"),u=(0,s.H9)(l,"whiteboard","my_whiteboard");let m;i.A.canUseDOM&&(m=(0,a.P5)(r))},5629:(e,t,n)=>{n.d(t,{A:()=>o});const o={whiteboardContainer:"whiteboardContainer_SP8X",mainLayout:"mainLayout_s6_7",leftSidebar:"leftSidebar_jF0t",rightContent:"rightContent_uNkw",sectionTitle:"sectionTitle_bN4F",tagsSection:"tagsSection_d2gX",tagsList:"tagsList_uoeT",tagButton:"tagButton_Bnu4",tagButtonActive:"tagButtonActive_nT5x",filterSection:"filterSection_L1uU",searchInput:"searchInput_nHte",timeSelect:"timeSelect_Epza",filterInfo:"filterInfo_L1cn",addNoteBtn:"addNoteBtn_WpU0",formContainer:"formContainer_jEvc",formRow:"formRow_LGGj",contentInput:"contentInput_cgkr",tagsInput:"tagsInput_NCNq",colorPicker:"colorPicker_l25W",colorOptions:"colorOptions_zfKP",colorOption:"colorOption_CQd9",colorSelected:"colorSelected_kIwL",formActions:"formActions_PXo5",submitBtn:"submitBtn_PNCW",cancelBtn:"cancelBtn_Pbfg",notesGrid:"notesGrid_M4Tb",note:"note_53F0",noteExpanded:"noteExpanded_qeKQ",overlay:"overlay_FoWT",editingForm:"editingForm_ZMYd",editTextarea:"editTextarea_mrZ_",editTagsInput:"editTagsInput_wKrx",editColorPicker:"editColorPicker_O0yZ",editActions:"editActions_WUYN",saveBtn:"saveBtn_axlZ",noteHeader:"noteHeader_ooKq",noteTime:"noteTime_tDhb",noteActions:"noteActions_vMqJ",editBtn:"editBtn_KWIG",deleteBtn:"deleteBtn_zWTc",completeBtn:"completeBtn_nfHb",noteContent:"noteContent_o38U",noteTags:"noteTags_GCXa",tag:"tag_Qk_f",highlight:"highlight_graa",emptyState:"emptyState_sO56",completedBtn:"completedBtn_ezVy",backBtn:"backBtn_UIqj",completedNote:"completedNote_GkBB"}},8478:(e,t,n)=>{n.d(t,{A:()=>a});n(6540);var o=n(2303),s=n(4848);function a({children:e,fallback:t}){return(0,o.A)()?(0,s.jsx)(s.Fragment,{children:e?.()}):t??null}},9361:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});n(6540);var o=n(1656),s=n(8478),a=n(4848);function i(){return(0,a.jsx)(o.A,{title:"\u767d\u677f",description:"\u4fbf\u5229\u8cbc\u767d\u677f - \u8a18\u9304\u548c\u7ba1\u7406\u4f60\u7684\u60f3\u6cd5",children:(0,a.jsx)(s.A,{fallback:(0,a.jsx)("div",{children:"\u8f09\u5165\u767d\u677f\u4e2d..."}),children:()=>{const e=n(862).A;return(0,a.jsx)(e,{})}})})}},9410:(e,t,n)=>{n.d(t,{A:()=>c});const o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let s;const a=new Uint8Array(16);const i=[];for(let d=0;d<256;++d)i.push((d+256).toString(16).slice(1));function r(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}function l(e,t,n){const o=(e=e||{}).random??e.rng?.()??function(){if(!s){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");s=crypto.getRandomValues.bind(crypto)}return s(a)}();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=o[e];return t}return r(o)}const c=function(e,t,n){return!o.randomUUID||t||e?l(e,t,n):o.randomUUID()}}}]);