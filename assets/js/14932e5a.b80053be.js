"use strict";(globalThis.webpackChunkresearch=globalThis.webpackChunkresearch||[]).push([[997],{1971:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(6540),s=n(8185),a=n(2294),i=n(5629),r=n(4848);const l=["#FFE5B4","#E1F5FE","#F3E5F5","#E8F5E9","#FFF3E0","#FCE4EC"];const c=function(){const[e,t]=(0,o.useState)([]),[n,c]=(0,o.useState)(""),[d,h]=(0,o.useState)(""),[m,u]=(0,o.useState)("ALL"),[g,p]=(0,o.useState)(null);(0,o.useEffect)(()=>{const e=(0,s.aQ)(a.FO,e=>{if(e.exists()){const n=e.data().notes||[];t(n.sort((e,t)=>(t.createdAt||0)-(e.createdAt||0)))}else t([])},e=>{console.error("Firestore \u76e3\u807d\u5931\u6557:",e)});return()=>e()},[]);const A=(0,o.useMemo)(()=>{const t=new Set;return e.forEach(e=>{e.tags&&e.completed&&e.tags.split(/[\s,]+/).forEach(e=>{const n=e.trim();n&&t.add(n)})}),Array.from(t).sort()},[e]),x=(0,o.useMemo)(()=>e.filter(e=>e.completed),[e]),_=(0,o.useMemo)(()=>{let e=[...x];if(n.trim()){const t=n.trim().toLowerCase();e=e.filter(e=>e.content.toLowerCase().includes(t)||e.tags&&e.tags.toLowerCase().includes(t))}if(d&&(e=e.filter(e=>e.tags&&e.tags.split(/[\s,]+/).some(e=>e.trim()===d))),"ALL"!==m){const t=Date.now();let n=0;switch(m){case"TODAY":n=(new Date).setHours(0,0,0,0);break;case"WEEK":n=t-6048e5;break;case"MONTH":n=t-2592e6;break;case"QUARTER":n=t-7776e6;break;case"YEAR":n=t-31536e6}e=e.filter(e=>(e.completedAt||0)>=n)}return e.sort((e,t)=>(t.completedAt||0)-(e.completedAt||0))},[x,n,d,m]),f=n=>{if(window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u9019\u5f35\u4fbf\u5229\u8cbc\u55ce\uff1f")){(async e=>{try{const n=e.sort((e,t)=>(t.createdAt||0)-(e.createdAt||0));t(n),await(0,s.BN)(a.FO,{notes:e}),console.log("\u767d\u677f\u8cc7\u6599\u5df2\u6210\u529f\u5beb\u5165 Firestore\u3002")}catch(n){console.error("\u5beb\u5165 Firestore \u5931\u6557:",n),alert("\u8b66\u544a\uff1a\u8cc7\u6599\u5beb\u5165\u96f2\u7aef\u5931\u6557\uff0c\u8acb\u6aa2\u67e5\u7db2\u8def\u9023\u7dda\u3002")}})(e.filter(e=>e.id!==n))}},b=e=>{if(!e)return"";const t=new Date(e);return`${t.toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"})} ${t.toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}`},j=(e,t)=>{if(!t||!t.trim())return e;const n=t.trim().toLowerCase(),o=e.toLowerCase(),s=[];let a=0,l=o.indexOf(n,a),c=0;for(;-1!==l;)l>a&&s.push(e.substring(a,l)),s.push((0,r.jsx)("span",{className:i.A.highlight,style:{backgroundColor:"#ffd700",color:"#000",padding:"2px 4px",borderRadius:"3px",fontWeight:"700",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 0, 0, 0.2)",display:"inline-block",position:"relative",zIndex:10},children:e.substring(l,l+t.length)},"highlight-"+c++)),a=l+t.length,l=o.indexOf(n,a);return a<e.length&&s.push(e.substring(a)),s.length>0?s:e};return(0,r.jsxs)("div",{className:i.A.whiteboardContainer,children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,r.jsx)("h2",{children:"\u5df2\u5b8c\u6210\u7684\u4fbf\u5229\u8cbc"}),(0,r.jsx)("button",{onClick:()=>{window.location.href="/research-website/whiteboard"},className:i.A.backBtn,children:"\u2190 \u8fd4\u56de"})]}),(0,r.jsxs)("div",{className:i.A.mainLayout,children:[(0,r.jsxs)("div",{className:i.A.leftSidebar,children:[(0,r.jsxs)("div",{className:i.A.tagsSection,children:[(0,r.jsx)("h3",{className:i.A.sectionTitle,children:"\u6a19\u7c64"}),(0,r.jsxs)("div",{className:i.A.tagsList,children:[(0,r.jsx)("button",{className:`${i.A.tagButton} ${""===d?i.A.tagButtonActive:""}`,onClick:()=>h(""),children:"\u5168\u90e8"}),A.map(e=>(0,r.jsx)("button",{className:`${i.A.tagButton} ${d===e?i.A.tagButtonActive:""}`,onClick:()=>h(e),children:e},e))]})]}),(0,r.jsxs)("div",{className:i.A.filterSection,children:[(0,r.jsx)("h3",{className:i.A.sectionTitle,children:"\u7be9\u9078"}),(0,r.jsx)("input",{type:"text",placeholder:"\u95dc\u9375\u5b57\u641c\u5c0b...",value:n,onChange:e=>c(e.target.value),className:i.A.searchInput}),(0,r.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:i.A.timeSelect,children:[(0,r.jsx)("option",{value:"ALL",children:"\u5168\u90e8\u6642\u9593"}),(0,r.jsx)("option",{value:"TODAY",children:"\u4eca\u5929"}),(0,r.jsx)("option",{value:"WEEK",children:"\u8fd1\u4e00\u9031"}),(0,r.jsx)("option",{value:"MONTH",children:"\u8fd1\u4e00\u6708"}),(0,r.jsx)("option",{value:"QUARTER",children:"\u8fd1\u4e00\u5b63"}),(0,r.jsx)("option",{value:"YEAR",children:"\u8fd1\u4e00\u5e74"})]}),(0,r.jsxs)("div",{className:i.A.filterInfo,children:["\u986f\u793a ",_.length," / ",x.length," \u5f35"]})]})]}),g&&(0,r.jsx)("div",{className:i.A.overlay,onClick:()=>p(null)}),(0,r.jsx)("div",{className:i.A.rightContent,children:(0,r.jsx)("div",{className:i.A.notesGrid,children:0===_.length?(0,r.jsx)("div",{className:i.A.emptyState,children:0===x.length?"\u9084\u6c92\u6709\u5df2\u5b8c\u6210\u7684\u4fbf\u5229\u8cbc":"\u6c92\u6709\u5339\u914d\u7684\u4fbf\u5229\u8cbc"}):_.map(e=>(0,r.jsxs)("div",{className:`${i.A.note} ${i.A.completedNote} ${g===e.id?i.A.noteExpanded:""}`,style:{backgroundColor:e.color||l[0]},onClick:t=>{t.stopPropagation(),p(g===e.id?null:e.id)},children:[(0,r.jsxs)("div",{className:i.A.noteHeader,children:[(0,r.jsxs)("span",{className:i.A.noteTime,children:["\u5b8c\u6210\u65bc\uff1a",b(e.completedAt)]}),(0,r.jsx)("div",{className:i.A.noteActions,children:(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),f(e.id)},className:i.A.deleteBtn,title:"\u522a\u9664",children:"\u2715"})})]}),(0,r.jsx)("div",{className:i.A.noteContent,children:j(e.content,n)}),e.tags&&(0,r.jsx)("div",{className:i.A.noteTags,children:e.tags.split(/\s+/).filter(e=>e).map((e,t)=>{const o=j(e,n);return(0,r.jsx)("span",{className:i.A.tag,children:o},t)})})]},e.id))})})]})]})}},2294:(e,t,n)=>{n.d(t,{FO:()=>h,_Z:()=>c,bY:()=>d});var o=n(223),s=n(8185),a=n(7673),i=n(8193);const r=(0,o.Dk)().length?(0,o.Sx)():(0,o.Wp)({apiKey:"AIzaSyAUDHCT_dtMHQFPcUh6-gFSIFXT6dR9MVg",authDomain:"my-tools-1228.firebaseapp.com",projectId:"my-tools-1228",storageBucket:"my-tools-1228.firebasestorage.app",messagingSenderId:"511787460330",appId:"1:511787460330:web:2896507029051b666e5993",measurementId:"G-WFF13TV61G"}),l=(0,s._A)(r,{experimentalForceLongPolling:!0,useFetchStreams:!1}),c=(0,s.rJ)(l,"stockWatchlist"),d=(0,s.H9)(l,"trade_journals","my_only_log"),h=(0,s.H9)(l,"whiteboard","my_whiteboard");let m;i.A.canUseDOM&&(m=(0,a.P5)(r))},5629:(e,t,n)=>{n.d(t,{A:()=>o});const o={whiteboardContainer:"whiteboardContainer_SP8X",mainLayout:"mainLayout_s6_7",leftSidebar:"leftSidebar_jF0t",rightContent:"rightContent_uNkw",sectionTitle:"sectionTitle_bN4F",tagsSection:"tagsSection_d2gX",tagsList:"tagsList_uoeT",tagButton:"tagButton_Bnu4",tagButtonActive:"tagButtonActive_nT5x",filterSection:"filterSection_L1uU",searchInput:"searchInput_nHte",timeSelect:"timeSelect_Epza",filterInfo:"filterInfo_L1cn",addNoteBtn:"addNoteBtn_WpU0",formContainer:"formContainer_jEvc",formRow:"formRow_LGGj",contentInput:"contentInput_cgkr",tagsInput:"tagsInput_NCNq",colorPicker:"colorPicker_l25W",colorOptions:"colorOptions_zfKP",colorOption:"colorOption_CQd9",colorSelected:"colorSelected_kIwL",formActions:"formActions_PXo5",submitBtn:"submitBtn_PNCW",cancelBtn:"cancelBtn_Pbfg",notesGrid:"notesGrid_M4Tb",note:"note_53F0",noteExpanded:"noteExpanded_qeKQ",overlay:"overlay_FoWT",editingForm:"editingForm_ZMYd",editTextarea:"editTextarea_mrZ_",editTagsInput:"editTagsInput_wKrx",editColorPicker:"editColorPicker_O0yZ",editActions:"editActions_WUYN",saveBtn:"saveBtn_axlZ",noteHeader:"noteHeader_ooKq",noteTime:"noteTime_tDhb",noteActions:"noteActions_vMqJ",editBtn:"editBtn_KWIG",deleteBtn:"deleteBtn_zWTc",completeBtn:"completeBtn_nfHb",noteContent:"noteContent_o38U",noteTags:"noteTags_GCXa",tag:"tag_Qk_f",highlight:"highlight_graa",emptyState:"emptyState_sO56",completedBtn:"completedBtn_ezVy",backBtn:"backBtn_UIqj",completedNote:"completedNote_GkBB"}},6109:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});n(6540);var o=n(1656),s=n(8478),a=n(4848);function i(){return(0,a.jsx)(o.A,{title:"\u5df2\u5b8c\u6210\u7684\u4fbf\u5229\u8cbc",description:"\u67e5\u770b\u5df2\u5b8c\u6210\u7684\u4fbf\u5229\u8cbc",children:(0,a.jsx)(s.A,{fallback:(0,a.jsx)("div",{children:"\u8f09\u5165\u4e2d..."}),children:()=>{const e=n(1971).A;return(0,a.jsx)(e,{})}})})}},8478:(e,t,n)=>{n.d(t,{A:()=>a});n(6540);var o=n(2303),s=n(4848);function a({children:e,fallback:t}){return(0,o.A)()?(0,s.jsx)(s.Fragment,{children:e?.()}):t??null}}}]);